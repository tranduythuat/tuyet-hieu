<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test Video Zalo</title>

<style>
    body {
        margin: 0;
        background: #000;
        font-family: sans-serif;
        color: #fff;
        text-align: center;
        padding: 20px;
    }

    h2 {
        margin-bottom: 10px;
    }

    .video-wrap {
        width: 100%;
        height: 60vh;
        overflow: hidden;
        background: #222;
        border-radius: 10px;
        position: relative;
    }

    video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        pointer-events: none; /* không cho bấm */
    }

    /* Ẩn controls khi Zalo tự chèn vào */
    video::-webkit-media-controls {
        display: none !important;
    }
</style>
</head>
<body>

<h2>Test Video Trên Zalo</h2>
<p>Nếu video không tự chạy, Zalo đã chặn autoplay.</p>

<div class="video-wrap">
    <video id="demoVideo" autoplay muted loop playsinline webkit-playsinline>
        <source src="https://pub-d341ea7ec201435598469d75d8c4a056.r2.dev/tuyet-hieu/20251117_065345000_iOS%20(online-video-cutter.com).mp4" type="video/mp4">
        Trình duyệt không hỗ trợ video.
    </video>
</div>

<script>
document.querySelectorAll("video").forEach(v => {
    // Gỡ controls nếu Zalo tự thêm
    v.removeAttribute("controls");

    // Đảm bảo muted + inline để autoplay mobile
    v.muted = true;
    v.setAttribute("playsinline", "");
    v.setAttribute("webkit-playsinline", "");

    // Thử autoplay
    setTimeout(() => {
        v.play().catch(err => {
            console.log("Autoplay bị chặn:", err);
        });
    }, 100);

    // Khi người dùng chạm -> cố gắng play lại
    const tryPlay = () => {
        if (v.paused) v.play().catch(()=>{});
    };

    window.addEventListener("touchstart", tryPlay, { once: true });
    window.addEventListener("click", tryPlay, { once: true });
});
</script>

</body>
</html>
